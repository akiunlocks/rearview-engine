define(["view/base","jquery-validate"],function(e){var t=e.extend({el:".settings",events:{"click .saveSettings":"saveSettings","click .saveCloseSettings":"saveCloseSettings"},initialize:function(e){_.bindAll(this,"saveSettings","saveCloseSettings","render"),this.user=e.user,this.templar=e.templar},render:function(){this.templar.render({path:"settings",el:this.$el,data:{user:this.user.toJSON()}}),this.$modal=this.$el.find(".settings"),this.resizeModal($("#settings"),"small",!0)},saveSettings:function(){this.user.applyPrefs({alertKeys:this.parseAlertKeys(this.$el.find(".alert-settings textarea").val())}),this.user.save({},{success:function(){Backbone.Mediator.pub("view:settings:save",{model:this.user,message:"message",attention:"attention"})}.bind(this),error:function(){}.bind(this)})},saveCloseSettings:function(){this.saveSettings(),this.$modal.modal("hide")},destructor:function(){var e=this.$el.prev();this.remove(),this.off(),this.$el=$("<section class='settings-wrap'></section>").insertAfter(e)},_closeModal:function(){this._cleanUp(),this.$modal.modal("hide")},_cleanUp:function(){}});return t});